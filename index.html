<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link rel="stylesheet" href="style.css" type="text/css" />

  <title>Travel Helper (가제)</title>
</head>

<body>
  <header>
    <!--Title Area-->
    <div class="container">
      <div class="item" id="title_input">
        <input class="form-control form-control-lg" type="text" placeholder="Enter trip title"
          aria-label=".form-control-lg example" />
      </div>

      <div class="item" id="date_input">
        <input class="form-control form-control-sm" type="text" id="demo" name="demo" value=""
          aria-label=".form-control-sm example" />
      </div>

      <div class="item" id="cpn_input">
        <input class="form-control form-control-sm" type="text" placeholder="김XX, 이XX, 박XX"
          aria-label=".form-control-sm example" />
      </div>
    </div>
  </header>
  <main>
    <!--Showing total Budget-->
    <div class="
        container
        bg-light
        p-1
        rounded-2
        ps-2
        d-flex
        justify-content-between
        align-items-center
      " id="total_budget_container">
      <div class="d-flex align-items-center" id="total_buget_text_area">
        <h4 id="total_text">Total:</h4>
        <h4 id="total_cost">300</h4>
        <h4 id="budget_text">/ Budget:</h4>
        <h4 id="budget_cost">400</h4>
        <h2 id="currency">$</h2>
      </div>
      <div id="btns_total_budget">
        <button type="button" class="btn btn-warning" id="btn_mode">
          <i class="fas fa-exchange-alt"></i>
        </button>
        <!--
        <button type="button" class="btn me-auto bg-primary" id="btn_dollar">
          should be changed to select
        </button>
      -->
        <select class="form-select me-auto border border-primary border-3" id="to_currency" required
          aria-label="select example">
          <option selected>USD</option>
        </select>
      </div>
    </div>
    <!--Main Plan Area-->
    <div class="cotainer" id="plan_container">
      <div id="plan_date_area"></div>
      <div id="list_map_area">
        <div id="list_area">
          <div id="plan_list_area"></div>
          <div id="budget_list_area">
            <!--Fill here-->
          </div>
        </div>
        <div id="map_area">
          <!--Fill here-->
        </div>
      </div>
    </div>
  </main>
  <footer></footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script>
    // creating option value of select form
    let exchangeList = ['AED', 'AFN', 'ALL', 'AMD', 'ANG', 'AOA', 'ARS', 'AUD', 'AWG', 'AZN', 'BAM', 'BBD', 'BDT', 'BGN', 'BHD', 'BIF', 'BMD', 'BND', 'BOB', 'BRL', 'BSD', 'BTC', 'BTN', 'BWP', 'BYN', 'BYR', 'BZD', 'CAD', 'CDF', 'CHF', 'CLF', 'CLP', 'CNY', 'COP', 'CRC', 'CUC', 'CUP', 'CVE', 'CZK', 'DJF', 'DKK', 'DOP', 'DZD', 'EGP', 'ERN', 'ETB', 'EUR', 'FJD', 'FKP', 'GBP', 'GEL', 'GGP', 'GHS', 'GIP', 'GMD', 'GNF', 'GTQ', 'GYD', 'HKD', 'HNL', 'HRK', 'HTG', 'HUF', 'IDR', 'ILS', 'IMP', 'INR', 'IQD', 'IRR', 'ISK', 'JEP', 'JMD', 'JOD', 'JPY', 'KES', 'KGS', 'KHR', 'KMF', 'KPW', 'KRW', 'KWD', 'KYD', 'KZT', 'LAK', 'LBP', 'LKR', 'LRD', 'LSL', 'LTL', 'LVL', 'LYD', 'MAD', 'MDL', 'MGA', 'MKD', 'MMK', 'MNT', 'MOP', 'MRO', 'MUR', 'MVR', 'MWK', 'MXN', 'MYR', 'MZN', 'NAD', 'NGN', 'NIO', 'NOK', 'NPR', 'NZD', 'OMR', 'PAB', 'PEN', 'PGK', 'PHP', 'PKR', 'PLN', 'PYG', 'QAR', 'RON', 'RSD', 'RUB', 'RWF', 'SAR', 'SBD', 'SCR', 'SDG', 'SEK', 'SGD', 'SHP', 'SLL', 'SOS', 'SRD', 'STD', 'SVC', 'SYP', 'SZL', 'THB', 'TJS', 'TMT', 'TND', 'TOP', 'TRY', 'TTD', 'TWD', 'TZS', 'UAH', 'UGX', 'USD', 'UYU', 'UZS', 'VEF', 'VND', 'VUV', 'WST', 'XAF', 'XAG', 'XAU', 'XCD', 'XDR', 'XOF', 'XPF', 'YER', 'ZAR', 'ZMK', 'ZMW', 'ZWL'];

    $(document).ready(function () {
      for (var i = 1; i < exchangeList.length; i++) {
        $('#to_currency').append('<option value ="' + exchangeList[i] + '">' + exchangeList[i] + '</option>');
      }
    })
  </script>

  <script>
    var mode = 1;
    $(document).ready(function () {
      $('#btn_mode').submit(function (e) {
        e.preventDefault();
        (mode === 1 ? mode = 2 : mode = 1);

        let currency1 = "KRW";
        let currency2 = $('#currency2').val();
        let total_other = Number($('#total_cost').val()); // other country's currency
        let budget_other = Number($('#budget_cost').val()); // other country's currency

        if (currency1 === currency2) {
          alert("Please choose a currency other than Won.");
          return;
        }

        // api 
        //var url = `http://data.fixer.io/api/latest?access_key=e38e55b1d6ab2de7b77a697cbdc7d938`;

        let currency1_rates;
        let currency2_rates;
        let total_krw; // Korean currency (KRW)
        let budget_krw; // Korean currency (KRW)

        // Getting Exchange Rates
        $.ajax({
          method: 'GET',
          url: url,
          success: function (data) {
            currency1_rates = data["rates"][currency1];
            currency2_rates = data["rates"][currency2];
            alert(currency1_rates);
            alert(data);

            // Calculating (other country's currency to Korean currency)
            total_krw = (((1 / currency2) * currency1) * total_other).toFixed(2);
            budget_krw = (((1 / currency2) * currency1) * budget_other).toFixed(2);
          }
        })

        if (mode === 2) {
          document.getElementById('#total_cost').innerText = total_krw;
          document.getElementById('#budget_cost').innerText = budget_krw;
        }

      })
    })
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

  <script type="text/javascript">
    $("#demo").daterangepicker(
      {
        locale: {
          format: "YYYY-MM-DD",
          separator: " ~ ",
          applyLabel: "확인",
          cancelLabel: "취소",
          fromLabel: "From",
          toLabel: "To",
          customRangeLabel: "Custom",
          weekLabel: "W",
          daysOfWeek: ["일", "월", "화", "수", "목", "금", "토"],
          monthNames: [
            "1월",
            "2월",
            "3월",
            "4월",
            "5월",
            "6월",
            "7월",
            "8월",
            "9월",
            "10월",
            "11월",
            "12월",
          ],
        },
        startDate: new Date(),
        endDate: new Date(),
        drops: "down",
      },
      function (start, end, label) {
        console.log(
          "New date range selected: " +
          start.format("YYYY-MM-DD") +
          " to " +
          end.format("YYYY-MM-DD") +
          " (predefined range: " +
          label +
          ")"
        );
      }
    );
  </script>
</body>

</html>