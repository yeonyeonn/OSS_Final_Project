<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" type="text/css" />

    <title>Travel Helper (가제)</title>
  </head>

  <body>
    <header>
      <!--Title Area-->
      <div class="container">
        <div class="item" id="title_input">
          <input
            class="form-control form-control-lg"
            type="text"
            placeholder="Enter trip title"
            aria-label=".form-control-lg example"
          />
        </div>

        <div class="item" id="date_input">
          <input
            class="form-control form-control-sm"
            type="text"
            id="demo"
            name="demo"
            value=""
            aria-label=".form-control-sm example"
          />
        </div>

        <div class="item" id="cpn_input">
          <input
            class="form-control form-control-sm"
            type="text"
            placeholder="김XX, 이XX, 박XX"
            aria-label=".form-control-sm example"
          />
        </div>
      </div>
    </header>
    <main>
      <!--Showing total Budget-->
      <div
        class="
          container
          bg-light
          p-1
          rounded-2
          ps-2
          d-flex
          justify-content-between
          align-items-center
        "
        id="total_budget_container"
      >
        <div class="d-flex align-items-center" id="total_buget_text_area">
          <h4 id="total_text">Total:</h4>
          <h4 id="total_cost">300</h4>
          <h4 id="budget_text">/ Budget:</h4>
          <h4 id="budget_cost">400</h4>
          <h2 id="currency">$</h2>
        </div>
        <div id="btns_total_budget">
          <button type="button" class="btn btn-warning" id="btn_mode">
            <i class="fas fa-exchange-alt"></i>
          </button>
          <!--
        <button type="button" class="btn me-auto bg-primary" id="btn_dollar">
          should be changed to select
        </button>
      -->
          <select
            class="form-select me-auto border border-primary border-3"
            id="to_currency"
            required
            aria-label="select example"
          >
            <option selected>USD</option>
          </select>
        </div>
      </div>
      <!--Main Plan Area-->
      <div class="cotainer" id="plan_container">
        <div id="plan_date_area"></div>
        <div id="list_map_area">
          <div id="list_area">
            <div id="plan_list_area"></div>
            <div id="budget_list_area">
              <!--Fill here-->
            </div>
          </div>
          <div id="map_area">
            <!--Fill here-->
          </div>
        </div>
      </div>
    </main>
    <footer></footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
      // creating option value of select form
      let exchangeList = [
        { currency: "AED", symbol: "د.إ" },
        { currency: "AFN", symbol: "Af" },
        { currency: "ALL", symbol: "L" },
        { currency: "AMD", symbol: "Դ" },
        { currency: "ANG", symbol: "ƒ" },
        { currency: "AOA", symbol: "Kz" },
        { currency: "ARS", symbol: "$" },
        { currency: "AUD", symbol: "$" },
        { currency: "AWG", symbol: "ƒ" },
        { currency: "AZN", symbol: "ман" },
        { currency: "BAM", symbol: "КМ" },
        { currency: "BBD", symbol: "$" },
        { currency: "BDT", symbol: "৳" },
        { currency: "BGN", symbol: "лв" },
        { currency: "BHD", symbol: "ب.د" },
        { currency: "BIF", symbol: "₣" },
        { currency: "BMD", symbol: "$" },
        { currency: "BND", symbol: "$" },
        { currency: "BOB", symbol: "Bs." },
        { currency: "BRL", symbol: "R$" },
        { currency: "BSD", symbol: "$" },
        { currency: "BTN", symbol: "Nu." },
        { currency: "BWP", symbol: "P" },
        { currency: "BYN", symbol: "Br" },
        { currency: "BZD", symbol: "$" },
        { currency: "CAD", symbol: "$" },
        { currency: "CDF", symbol: "₣" },
        { currency: "CHF", symbol: "₣" },
        { currency: "CLF", symbol: "UF" },
        { currency: "CLP", symbol: "$" },
        { currency: "CNY", symbol: "¥" },
        { currency: "COP", symbol: "$" },
        { currency: "CRC", symbol: "₡" },
        { currency: "CUC", symbol: "$" },
        { currency: "CUP", symbol: "$" },
        { currency: "CVE", symbol: "$" },
        { currency: "CZK", symbol: "Kč" },
        { currency: "DJF", symbol: "₣" },
        { currency: "DKK", symbol: "kr" },
        { currency: "DOP", symbol: "$" },
        { currency: "DZD", symbol: "د.ج" },
        { currency: "EGP", symbol: "£" },
        { currency: "ERN", symbol: "Nfk" },
        { currency: "ETB", symbol: "Br" },
        { currency: "EUR", symbol: "€" },
        { currency: "FJD", symbol: "$" },
        { currency: "FKP", symbol: "£" },
        { currency: "GBP", symbol: "£" },
        { currency: "GEL", symbol: "ლ" },
        { currency: "GGP", symbol: "£" },
        { currency: "GHS", symbol: "₵" },
        { currency: "GIP", symbol: "£" },
        { currency: "GMD", symbol: "D" },
        { currency: "GNF", symbol: "₣" },
        { currency: "GTQ", symbol: "Q" },
        { currency: "GYD", symbol: "$" },
        { currency: "HKD", symbol: "$" },
        { currency: "HNL", symbol: "L" },
        { currency: "HRK", symbol: "Kn" },
        { currency: "HTG", symbol: "G" },
        { currency: "HUF", symbol: "Ft" },
        { currency: "IDR", symbol: "Rp" },
        { currency: "ILS", symbol: "₪" },
        { currency: "IMP", symbol: "£" },
        { currency: "INR", symbol: "₹" },
        { currency: "IQD", symbol: "ع.د" },
        { currency: "IRR", symbol: "﷼" },
        { currency: "ISK", symbol: "Kr" },
        { currency: "JEP", symbol: "$" },
        { currency: "JMD", symbol: "$" },
        { currency: "JOD", symbol: "د.ا" },
        { currency: "JPY", symbol: "¥" },
        { currency: "KES", symbol: "Sh" },
        { currency: "KHR", symbol: "៛" },
        { currency: "KMF", symbol: "£" },
        { currency: "KPW", symbol: "₩" },
        { currency: "KRW", symbol: "₩" },
        { currency: "KWD", symbol: "د.ك" },
        { currency: "KYD", symbol: "$" },
        { currency: "KZT", symbol: "〒" },
        { currency: "LBP", symbol: "ل.ل" },
        { currency: "LKR", symbol: "Rs" },
        { currency: "LRD", symbol: "$" },
        { currency: "LSL", symbol: "L" },
        { currency: "LYD", symbol: "ل.د" },
        { currency: "MAD", symbol: "د.م." },
        { currency: "MDL", symbol: "L" },
        { currency: "MGA", symbol: "Ar" },
        { currency: "MKD", symbol: "ден" },
        { currency: "MMK", symbol: "K" },
        { currency: "MNT", symbol: "₮" },
        { currency: "MOP", symbol: "P" },
        { currency: "MRO", symbol: "UM" },
        { currency: "MUR", symbol: "₨" },
        { currency: "MVR", symbol: "ރ." },
        { currency: "MWK", symbol: "ރ." },
        { currency: "MXN", symbol: "$" },
        { currency: "MYR", symbol: "RM" },
        { currency: "MZN", symbol: "MTn" },
        { currency: "NAD", symbol: "$" },
        { currency: "NGN", symbol: "₦" },
        { currency: "NOK", symbol: "kr" },
        { currency: "NPR", symbol: "₨" },
        { currency: "NZD", symbol: "$" },
        { currency: "OMR", symbol: "ر.ع." },
        { currency: "PAB", symbol: "B/." },
        { currency: "PEN", symbol: "S/." },
        { currency: "PGK", symbol: "K" },
        { currency: "PHP", symbol: "₱" },
        { currency: "PKR", symbol: "₨" },
        { currency: "PLN", symbol: "zł" },
        { currency: "PYG", symbol: "₲" },
        { currency: "QAR", symbol: "ر.ق" },
        { currency: "RON", symbol: "L" },
        { currency: "RSD", symbol: "din" },
        { currency: "RUB", symbol: "р." },
        { currency: "RWF", symbol: "₣" },
        { currency: "SAR", symbol: "ر.س" },
        { currency: "SBD", symbol: "$" },
        { currency: "SCR", symbol: "₨" },
        { currency: "SDG", symbol: "£" },
        { currency: "SEK", symbol: "£" },
        { currency: "SGD", symbol: "$" },
        { currency: "SHP", symbol: "£" },
        { currency: "SLL", symbol: "Le" },
        { currency: "SOS", symbol: "Sh" },
        { currency: "SRD", symbol: "$" },
        { currency: "SYP", symbol: "ر.س" },
        { currency: "SZL", symbol: "L" },
        { currency: "THB", symbol: "฿" },
        { currency: "TJS", symbol: "ЅМ" },
        { currency: "TMT", symbol: "m" },
        { currency: "TND", symbol: "د.ت" },
        { currency: "TOP", symbol: "T$" },
        { currency: "TRY", symbol: "₤" },
        { currency: "TTD", symbol: "$" },
        { currency: "TWD", symbol: "$" },
        { currency: "TZS", symbol: "Sh" },
        { currency: "UAH", symbol: "₴" },
        { currency: "UGX", symbol: "Sh" },
        { currency: "USD", symbol: "$" },
        { currency: "UYU", symbol: "$" },
        { currency: "UZS", symbol: "so'm" },
        { currency: "VEF", symbol: "Bs F" },
        { currency: "VND", symbol: "₫" },
        { currency: "VUV", symbol: "Vt" },
        { currency: "WST", symbol: "T" },
        { currency: "XAF", symbol: "₣" },
        { currency: "XCD", symbol: "$" },
        { currency: "XOF", symbol: "Fr" },
        { currency: "XPF", symbol: "₣" },
        { currency: "YER", symbol: "﷼" },
        { currency: "ZAR", symbol: "R" },
        { currency: "ZMK", symbol: "ZK" },
        { currency: "ZMW", symbol: "$" },
        { currency: "ZWL", symbol: "$" },
      ];

      $(document).ready(function () {
        for (var i = 1; i < exchangeList.length; i++) {
          $("#to_currency").append(
            '<option value ="' +
              exchangeList[i].currency +
              '">' +
              exchangeList[i].currency +
              "</option>"
          );
        }
      });

      $(document).ready(function () {
        $("#to_currency").on("change", function () {
          let showSymbol = exchangeList.find((o) => o.currency === this.value);
          document.querySelector("#currency").textContent = showSymbol.symbol;
        });
      });
    </script>

    <script>
      const Mode = {
        other_KRW: 1,
        KRW_other: 2,
      };

      var mode = 1;

      $(document).ready(function () {
        $("#btn_mode").click(function (e) {
          alert("btn_mode executed");
          e.preventDefault();
          mode === 1 ? (mode = 2) : (mode = 1);
          alert(mode);
          let currency1 = "KRW"; // currency
          let currency2 = $("#to_currency").val(); // currency
          let total_cost = document.querySelector("#total_cost").innerText;
          let budget_cost = document.querySelector("#budget_cost").innerText;

          if (currency1 === currency2) {
            alert("Please choose a currency other than Won.");
            return;
          }

          // api
          var url = `API Key`;

          let currency1_rates;
          let currency2_rates;
          let total_exchanged;
          let budget_exchanged;

          // Getting Exchange Rates
          $.ajax({
            method: "GET",
            url: url,
            async: false,
            success: function (data) {
              currency1_rates = data["rates"][currency1];
              currency2_rates = data["rates"][currency2];
              console.log(data);
            },
          });
          // Calculating
          if (mode === 2) {
            total_exchanged = (
              (1 / currency2_rates) *
              currency1_rates *
              total_cost
            ).toFixed(2);
            budget_exchanged = (
              (1 / currency2_rates) *
              currency1_rates *
              budget_cost
            ).toFixed(2);
          } else {
            total_exchanged = (
              (1 / currency1_rates) *
              currency2_rates *
              total_cost
            ).toFixed(2);
            budget_exchanged = (
              (1 / currency1_rates) *
              currency2_rates *
              budget_cost
            ).toFixed(2);
          }

          document.querySelector("#total_cost").textContent = total_exchanged;
          document.querySelector("#budget_cost").textContent = budget_exchanged;
        });
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"
    ></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
    />

    <script type="text/javascript">
      $("#demo").daterangepicker(
        {
          locale: {
            format: "YYYY-MM-DD",
            separator: " ~ ",
            applyLabel: "확인",
            cancelLabel: "취소",
            fromLabel: "From",
            toLabel: "To",
            customRangeLabel: "Custom",
            weekLabel: "W",
            daysOfWeek: ["일", "월", "화", "수", "목", "금", "토"],
            monthNames: [
              "1월",
              "2월",
              "3월",
              "4월",
              "5월",
              "6월",
              "7월",
              "8월",
              "9월",
              "10월",
              "11월",
              "12월",
            ],
          },
          startDate: new Date(),
          endDate: new Date(),
          drops: "down",
        },
        function (start, end, label) {
          console.log(
            "New date range selected: " +
              start.format("YYYY-MM-DD") +
              " to " +
              end.format("YYYY-MM-DD") +
              " (predefined range: " +
              label +
              ")"
          );
        }
      );
    </script>
  </body>
</html>
